<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LibreTV - 免费在线视频搜索与观看平台</title>
    {/* ... meta tags, links, etc. ... */}
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .douban-tag-active {
            background-color: #ec4899; /* Pink-500 */
            color: white;
            border-color: #ec4899;
        }
        .douban-tag:not(.douban-tag-active):hover {
            background-color: #374151; /* Gray-700 */
        }
        /* 禁用按钮样式 */
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        button:disabled:hover {
            opacity: 0.5; /* 保持禁用时的 hover 效果 */
        }

    </style>
</head>
<body class="page-bg text-white">
    {/* ... Header Buttons (History, Settings) ... */}

    {/* ... History Panel ... */}

    {/* ... Settings Panel ... */}

    <div class="container mx-auto px-4 py-8 flex flex-col min-h-screen">
        <div class="flex-1 flex flex-col">
            {/* ... Website Logo and Slogan ... */}
            <header class="text-center mb-2">
                 {/* ... */}
            </header>

            {/* ... Search Area ... */}
            <div id="searchArea" class="flex flex-col items-center justify-center">
                 {/* ... */}
            </div>

            {/* --- 豆瓣推荐部分 --- */}
            {/* 标签和换一批按钮容器 */}
            <div id="douban-tags-container"
                 class="my-6 flex flex-wrap justify-center items-center gap-2 md:gap-4 px-2">
                {/* Tags and Next Button will be generated here by app.js */}
            </div>

            {/* 推荐结果展示网格 */}
            <div id="douban-results"
                 class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">
                {/* Loading Indicator */}
                <div class="col-span-full text-center text-gray-400 py-10" id="douban-loading">
                    <div class="inline-block w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin mb-2"></div>
                    <div>正在加载推荐...</div>
                </div>
            </div>
            {/* --- 豆瓣推荐部分结束 --- */}


            {/* ... Search Results Area (hidden initially) ... */}
            <div id="resultsArea" class="w-full hidden mt-8">
                 {/* ... */}
            </div>
        </div>
    </div>

    {/* ... Footer ... */}

    {/* ... Modals (Details, Password, Disclaimer) ... */}

    {/* ... Toast & Loading Indicators ... */}

    {/* ... Scripts ... */}
    <script src="https://cdn.jsdelivr.net/npm/js-sha256@0.9.0/build/sha256.min.js"></script>
    <script> window._jsSha256 = window.sha256; </script>
    <script src="js/config.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/api.js"></script>
    <script src="js/password.js"></script>
    <script src="js/app.js"></script> {/* app.js now includes Douban logic */}
    <script> window.__ENV__ = window.__ENV__ || {}; window.__ENV__.PASSWORD = "{{PASSWORD}}"; </script>
    <script>
        // Disclaimer Modal Logic
        document.addEventListener('DOMContentLoaded', function() {
            const hasSeenDisclaimer = localStorage.getItem('hasSeenDisclaimer');
            if (!hasSeenDisclaimer) {
                const disclaimerModal = document.getElementById('disclaimerModal');
                if (disclaimerModal) disclaimerModal.style.display = 'flex';

                const acceptBtn = document.getElementById('acceptDisclaimerBtn');
                if (acceptBtn && disclaimerModal) {
                    acceptBtn.addEventListener('click', function() {
                        localStorage.setItem('hasSeenDisclaimer', 'true');
                        disclaimerModal.style.display = 'none';
                    });
                }
            }
        });
    </script>
     {/* Douban fetching logic is now inside app.js */}
</body>
</html>
